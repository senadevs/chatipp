---
import Layout from '../layouts/Layout.astro';
import Chat from '../components/Chat';

const isAuthenticated = Astro.cookies.get('sb-token')?.value;
---

<Layout title="Chat Interface">
  <div class="container mx-auto px-4">
    <div id="auth-check">
      <Chat client:load />
    </div>
  </div>

  <script>
    const authCheck = document.getElementById('auth-check');
    const authData = localStorage.getItem('auth-storage');
    
    if (!authData || !JSON.parse(authData).state.isAuthenticated) {
      window.location.href = '/login';
    }
  </script>
</Layout>